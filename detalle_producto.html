<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle del Producto | UrbanHoops</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/estilos.css">
</head>

<body>
    <div id="accesibilidad-menu"
     class="position-fixed top-50 end-0 translate-middle-y bg-dark p-3 rounded-start shadow-lg d-flex flex-column gap-2"
     style="z-index: 9999; width: 160px;">

        <button id="btn-contraste" class="btn btn-warning btn-sm fw-bold w-100">
            Alto Contraste
        </button>

        <button id="btn-aumentar" class="btn btn-light btn-sm fw-bold w-100">
            Aumentar letra
        </button>

        <button id="btn-disminuir" class="btn btn-light btn-sm fw-bold w-100">
            Disminuir letra
        </button>

        <button id="btn-normal" class="btn btn-secondary btn-sm fw-bold w-100">
            Tama√±o normal
        </button>
    </div>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="./recursos/imagenes/logo_fondo_osc.png" alt="Logo UrbanHoops" width="100">
            </a>
            <div class="d-flex align-items-center">
                <a href="index.html" class="text-white text-decoration-none me-3">Inicio</a>
                <a href="productos_servicios.html" class="text-white text-decoration-none me-3">Productos</a>
                <a href="contactanos.html" class="text-white text-decoration-none me-3">Contacto</a>
                <button id="btnOpenCart" class="btn btn-outline-warning position-relative" onclick="abrirCarrito()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.352l.798 1.594H15.5a.5.5 0 0 1 .491.592l-1.5 8a.5.5 0 0 1-.491.408H1.832a.5.5 0 0 1-.493-.416l-1.5-8A.5.5 0 0 1 0 1.5zm4.541 6a.5.5 0 0 0-.542.493l.541.432.541-.432a.5.5 0 0 0-.541-.493zM13 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm-4-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                    </svg>
                    <span id="cartCount" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="display:none;">0</span>
                </button>
            </div>
        </div>
    </nav>

    <section class="container my-5">
        <div id="detalleProductoContainer">
            <div class="row">
                <div class="col-lg-5">
                    <img id="detalleImagen" src="./recursos/productos" alt="Imagen del Producto"
                        class="img-fluid rounded shadow w-100 h-100">
                </div>
                <div class="col-lg-7">
                    <h1 id="detalleNombre" class="display-5 fw-bold mb-2"></h1>
                    <p class="mb-3">
                        <span class="text-warning">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span> 4.0
                    </p>
                    <h2 id="detallePrecio" class="text-danger display-4 mb-4 fw-bold"></h2>
                    <h3 class="h5 fw-bold mb-2">Descripci√≥n </h3>
                    <p id="detalleDescripcion" class=" mb-4">

                    </p>
                    <div class="mb-5">
                        <h3 class="h5 fw-bold mb-3">Talla (US)</h3>
                        <div class="d-flex flex-wrap">
                            <div class="opcion-talla me-2 mb-2">8</div>
                            <div class="opcion-talla me-2 mb-2">8.5</div>
                            <div class="opcion-talla activo me-2 mb-2">9</div>
                            <div class="opcion-talla me-2 mb-2">9.5</div>
                            <div class="opcion-talla me-2 mb-2">10</div>
                            <div class="opcion-talla me-2 mb-2">10.5</div>
                            <div class="opcion-talla me-2 mb-2">11</div>
                            <div class="opcion-talla me-2 mb-2">11.5</div>
                            <div class="opcion-talla me-2 mb-2">12</div>
                            <div class="opcion-talla me-2 mb-2">13</div>
                            <div class="opcion-talla me-2 mb-2 text-decoration-line-through  bg-light">14
                            </div>
                        </div>
                    </div>
                    <div class="d-grid gap-2">
                        <button class="btn btn-dark btn-lg py-3 fw-bold" id="btnAgregarCarritoDetalle">A√±adir al Carrito</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="errorProducto" class="text-center" style="display:none;">
            <h2 class="display-6 text-danger">Producto no encontrado.</h2>
            <a href="productos_servicios.html" class="btn btn-warning mt-3">Volver a Productos</a>
        </div>
    </section>

    <!-- Modal del Carrito -->
    <div class="modal fade" id="modalCarrito" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">üõí Carrito de Compras</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="cartItems" class="list-group" style="max-height:400px; overflow-y:auto;">
                        <div class="text-center py-5 text-muted">Tu carrito est√° vac√≠o</div>
                    </div>
                </div>
                <div class="modal-footer d-flex justify-content-between align-items-center">
                    <div class="text-lg font-weight-bold">
                        Total: <span id="cartTotal" class="text-danger">$0.00</span>
                    </div>
                    <div>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        <button id="btnCheckout" type="button" class="btn btn-success">Comprar Ahora</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-white text-center py-4">
        <div class="container">
            <div class="mt-2">
                <a href="index.html" class="text-warning text-decoration-none me-3">Inicio</a>
                <span class="text-white">|</span>
                <a href="productos_servicios.html" class="text-warning text-decoration-none mx-3">Productos</a>
                <span class="text-white">|</span>
                <a href="contactanos.html" class="text-warning text-decoration-none ms-3">Contacto</a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./js/alto-contraste.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <!-- Scripts del Carrito -->
    <script src="./js/model/modelCarrito.js"></script>
    <script src="./js/views/viewCarrito.js"></script>
    <script src="./js/controller/controllerCarrito.js"></script>

    <script>
        // Funci√≥n para agregar productos al carrito
        function agregarProductoAlCarrito(id, nombre, precio, imagen) {
            console.log('Agregando producto:', {id, nombre, precio, imagen});
            
            const producto = {
                id: id,
                name: nombre,
                price: precio,
                image: imagen,
                qty: 1
            };
            
            // Agregar al carrito usando window.cart
            if (window.cart) {
                console.log('window.cart disponible');
                window.cart.add(producto, 1);
                
                // Actualizar contador
                const count = window.cart.getCount();
                const countElement = document.getElementById('cartCount');
                if (countElement) {
                    countElement.textContent = count;
                    countElement.style.display = count > 0 ? 'inline-block' : 'none';
                }
                
                // Mostrar mensaje
                if (window.cart.view && window.cart.view.showMessage) {
                    window.cart.view.showMessage(`‚úÖ "${nombre}" agregado al carrito`);
                }
            } else {
                console.error('window.cart NO disponible');
                alert(`‚úÖ "${nombre}" agregado al carrito`);
            }
        }

        // Funci√≥n para abrir el carrito
        function abrirCarrito() {
            console.log('Abriendo carrito...');
            const modal = document.getElementById('modalCarrito');
            if (modal) {
                try {
                    // Intentar con Bootstrap
                    const bsModal = new bootstrap.Modal(modal);
                    bsModal.show();
                } catch (e) {
                    console.log('Bootstrap no disponible, usando m√©todo manual');
                    modal.style.display = 'block';
                }
            } else {
                console.error('Modal no encontrado');
            }
        }

        document.addEventListener('DOMContentLoaded', function () {

            const productos = [{
                id: 1,
                name: 'Nike LeBron 21',
                description: 'Zapatillas de √©lite para velocidad y amortiguaci√≥n.',
                long_description: 'La Nike LeBron 21 es una zapatilla de baloncesto de √©lite, perfecta para jugadores que buscan una combinaci√≥n de velocidad, contenci√≥n y amortiguaci√≥n premium. Su dise√±o ligero ofrece una respuesta explosiva en la cancha. Perfecta para el juego moderno.',
                price: 180.00,
                qt: 10,
                enStock: true,
                image: './recursos/productos/lebron21.png',
                category: 'zapatillas'
            }, {
                id: 2,
                name: 'Adidas Harden Vol. 8',
                description: 'Dise√±o futurista y rendimiento excepcional para el base.',
                long_description: 'Las Adidas Harden Vol. 8 ofrecen una comodidad inigualable y un rendimiento excepcional con tecnolog√≠a de amortiguaci√≥n avanzada. Dise√±adas para emular el estilo de juego de James Harden, brindan m√°xima agilidad y soporte en los movimientos laterales.',
                price: 160.00,
                qt: 8,
                enStock: true,
                image: './recursos/productos/harden8.png',
                category: 'zapatillas'
            }, {
                id: 3,
                name: 'ANTA KAI 2 ‚ÄúKlay‚Äù',
                description: 'Estilo y performance con la firma de Klay Thompson.',
                long_description: 'Las ANTA KAI 2 ‚ÄúKlay‚Äù combinan un estilo urbano audaz con tecnolog√≠a de alto rendimiento. Ofrecen una excelente tracci√≥n y amortiguaci√≥n, ideales para jugadores que necesitan versatilidad y un buen agarre tanto en interiores como exteriores.',
                price: 145.00,
                qt: 15,
                enStock: true,
                image: './recursos/productos/kai2klay.png',
                category: 'zapatillas'
            }, {
                id: 4,
                name: 'Under Armour Curry Flow 10',
                description: 'Tracci√≥n superior sin goma para una ligereza extrema.',
                long_description: 'Las Under Armour Curry Flow 10 son conocidas por su amortiguaci√≥n revolucionaria Flow, que elimina la necesidad de suela de goma, ofreciendo una ligereza y tracci√≥n superior para un juego r√°pido y √°gil. El calzado de la superestrella Stephen Curry.',
                price: 150.00,
                qt: 5,
                enStock: true,
                image: './recursos/productos/curry10.png',
                category: 'zapatillas'
            }, {
                id: 5,
                name: 'Jordan Zion 3',
                description: 'M√°xima contenci√≥n para jugadores explosivos y potentes.',
                long_description: 'Las Jordan Zion 3 est√°n dise√±adas para la fuerza y el poder. Ofrecen una amortiguaci√≥n excepcional y una contenci√≥n robusta, perfectas para jugadores que dominan la pintura y necesitan soporte en cada salto y aterrizaje.',
                price: 120.00,
                qt: 12,
                enStock: true,
                image: './recursos/productos/zion3.png',
                category: 'zapatillas'
            }, {
                id: 6,
                name: 'Puma All Pro Nitro',
                description: 'Velocidad y respuesta gracias a la tecnolog√≠a Nitro.',
                long_description: 'La Puma All Pro Nitro utiliza la espuma Nitro para una amortiguaci√≥n ligera y responsiva. Es una zapatilla vers√°til que proporciona un gran retorno de energ√≠a y estabilidad, ideal para jugadores de todas las posiciones.',
                price: 140.00,
                qt: 9,
                enStock: true,
                image: './recursos/productos/pumaallpro.png',
                category: 'zapatillas'
            }, {
                id: 7,
                name: 'Bal√≥n Spalding NBA Official',
                description: 'Bal√≥n oficial de la liga, cuero premium para interiores.',
                long_description: 'El Bal√≥n Spalding NBA Official est√° fabricado con cuero premium para una sensaci√≥n de agarre profesional. Es el bal√≥n reglamentario para los partidos de la NBA, ideal para interiores y jugadores que buscan la mejor calidad de juego.',
                price: 70.00,
                qt: 25,
                enStock: true,
                image: './recursos/productos/balonspalding.png',
                category: 'balones'
            }, {
                id: 8,
                name: 'Bal√≥n Wilson Evolution',
                description: 'El bal√≥n de interior m√°s popular y reconocido del mercado.',
                long_description: 'El Bal√≥n Wilson Evolution es considerado el mejor bal√≥n de baloncesto de interior no oficial. Su cubierta de microfibra compuesta ofrece un tacto suave y un agarre excepcional, preferido por jugadores de preparatoria y universidad.',
                price: 65.00,
                qt: 30,
                enStock: true,
                image: './recursos/productos/balonwilson.png',
                category: 'balones'
            }, {
                id: 9,
                name: 'Bal√≥n Nike Elite Championship',
                description: 'Excelente tacto y durabilidad para canchas cubiertas.',
                long_description: 'El Bal√≥n Nike Elite Championship ofrece una excelente durabilidad y un tacto suave. Dise√±ado para la competici√≥n, mantiene la forma y la presi√≥n durante m√°s tiempo, siendo una opci√≥n s√≥lida para torneos y ligas.',
                price: 55.00,
                qt: 18,
                enStock: true,
                image: './recursos/productos/balonnikeelite.jpg',
                category: 'balones'
            }, {
                id: 10,
                name: 'Bal√≥n Molten GG7X',
                description: 'Aprobado por la FIBA, gran visibilidad y agarre.',
                long_description: 'El Bal√≥n Molten GG7X es el bal√≥n oficial de la FIBA (Federaci√≥n Internacional de Baloncesto). Su dise√±o de 12 paneles y la cubierta de cuero sint√©tico proporcionan un agarre constante y una gran visibilidad en la cancha.',
                price: 75.00,
                qt: 14,
                enStock: true,
                image: './recursos/productos/balonmolten.jpg',
                category: 'balones'
            }, {
                id: 11,
                name: 'Camiseta Lakers Edici√≥n 2025',
                description: 'Jersey oficial, transpirable y ligero.',
                long_description: 'La Camiseta de los Lakers Edici√≥n 2025 presenta un tejido transpirable con tecnolog√≠a Dri-FIT para mantenerte fresco y seco. El dise√±o celebra la nueva temporada con detalles y colores oficiales del equipo de Los √Ångeles.',
                price: 90.00,
                qt: 22,
                enStock: true,
                image: './recursos/productos/camisetalakers.png',
                category: 'ropa'
            }, {
                id: 12,
                name: 'Camiseta Warriors Classic',
                description: 'Estilo retro, camiseta del Golden State Warriors.',
                long_description: 'La Camiseta de los Warriors Classic rinde homenaje a los uniformes hist√≥ricos del equipo. Confeccionada con materiales de alta calidad, es perfecta para usar en el juego o como parte de tu colecci√≥n de moda urbana.',
                price: 85.00,
                qt: 19,
                enStock: true,
                image: './recursos/productos/camisetawarriors.png',
                category: 'ropa'
            }, {
                id: 13,
                name: 'Short Jordan Performance',
                description: 'Short ligero y funcional para m√°xima movilidad.',
                long_description: 'El Short Jordan Performance es un esencial para el entrenamiento. Su tejido ligero con tecnolog√≠a que absorbe el sudor te mantiene c√≥modo mientras te mueves. Cuenta con bolsillos y un ajuste el√°stico en la cintura.',
                price: 45.00,
                qt: 35,
                enStock: true,
                image: './recursos/productos/shortjordan.jpeg',
                category: 'ropa'
            }, {
                id: 14,
                name: 'Sudadera Nike Dri-FIT',
                description: 'Comodidad y calidez antes y despu√©s del partido.',
                long_description: 'Esta Sudadera Nike Dri-FIT es ideal para mantener la temperatura muscular. El tejido suave y la capucha ajustable ofrecen m√°xima comodidad. Un b√°sico para los d√≠as de entrenamiento o para un look casual deportivo.',
                price: 75.00,
                qt: 16,
                enStock: true,
                image: './recursos/productos/sudaderanike.jpeg',
                category: 'ropa'
            }, {
                id: 15,
                name: 'Chaqueta Adidas Training',
                description: 'Corte moderno, ideal para el calentamiento.',
                long_description: 'La Chaqueta Adidas Training ofrece un corte moderno y est√° fabricada con materiales reciclados. Es ligera, resistente al viento y perfecta para el calentamiento o para protegerte en los d√≠as fr√≠os.',
                price: 95.00,
                qt: 11,
                enStock: true,
                image: './recursos/productos/chaquetaadidas.jpeg',
                category: 'ropa'
            }, {
                id: 16,
                name: 'ANTA GH4',
                description: 'Zapatillas de alto rendimiento, vers√°tiles para todo tipo de juego.',
                long_description: 'Las ANTA GH4 son el modelo de Gordon Hayward, conocido por su versatilidad. Estas zapatillas ofrecen un equilibrio perfecto entre amortiguaci√≥n, estabilidad y respuesta, siendo una opci√≥n s√≥lida para jugadores completos.',
                price: 125.00,
                qt: 7,
                enStock: true,
                image: './recursos/productos/gh4.png',
                category: 'zapatillas'
            }, {
                id: 17,
                name: 'ANTA KT Splash',
                description: 'Durabilidad y tracci√≥n para el baloncesto de calle.',
                long_description: 'Las ANTA KT Splash est√°n dise√±adas pensando en la durabilidad. Su suela exterior resistente las hace ideales para el baloncesto de calle o canchas con superficies m√°s rugosas, sin sacrificar la comodidad y el agarre.',
                price: 110.00,
                qt: 13,
                enStock: true,
                image: './recursos/productos/ktsplash.png',
                category: 'zapatillas'
            }, {
                id: 18,
                name: 'Jordan Luka 3',
                description: 'Dise√±adas para la velocidad y los cambios de ritmo r√°pidos.',
                long_description: 'Las Jordan Luka 3 son las zapatillas de Luka Donƒçiƒá, enfocadas en la ligereza y la amortiguaci√≥n de bajo perfil para optimizar la velocidad y los cambios de direcci√≥n r√°pidos, esenciales para el juego de un playmaker.',
                price: 135.00,
                qt: 6,
                enStock: true,
                image: './recursos/productos/luka3.png',
                category: 'zapatillas'
            }, {
                id: 19,
                name: 'Bal√≥n Spalding Street Outdoor',
                description: 'Dise√±o resistente y duradero para uso en exteriores.',
                long_description: 'El Bal√≥n Spalding Street Outdoor est√° construido para resistir las superficies de asfalto y cemento. Su cubierta de caucho garantiza la m√°xima durabilidad sin comprometer el tacto, siendo el compa√±ero perfecto para la cancha de calle.',
                price: 40.00,
                qt: 40,
                enStock: true,
                image: './recursos/productos/balonstreet.png',
                category: 'balones'
            }, {
                id: 20,
                name: 'Conjunto Puma Basketball',
                description: 'Set completo de camiseta y short, listo para la cancha.',
                long_description: 'Este Conjunto Puma Basketball ofrece una soluci√≥n completa para el d√≠a de juego. Tanto la camiseta como el short est√°n hechos de material transpirable, dise√±ados para un ajuste c√≥modo y un rendimiento √≥ptimo en la cancha.',
                price: 115.00,
                qt: 17,
                enStock: true,
                image: './recursos/productos/conjuntopuma.jpeg',
                category: 'ropa'
            }];

            function obtenerParametroURL(nombre) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(nombre);
            }


            const productoId = parseInt(obtenerParametroURL('id'));

            const detalleContainer = document.getElementById('detalleProductoContainer');
            const errorContainer = document.getElementById('errorProducto');

            let productoEncontrado = null;

            productos.forEach(producto => {
                if (producto.id === productoId) {
                    productoEncontrado = producto;
                }
            });

            if (productoEncontrado) {

                errorContainer.style.display = 'none';
                detalleContainer.style.display = 'block';

                document.getElementById('detalleImagen').src = productoEncontrado.image;
                document.getElementById('detalleImagen').alt = productoEncontrado.name;
                document.getElementById('detalleNombre').textContent = productoEncontrado.name;
                document.getElementById('detallePrecio').textContent = `$${productoEncontrado.price.toFixed(2)} USD`;
                document.getElementById('detalleDescripcion').textContent = productoEncontrado.long_description;

                // Bot√≥n A√±adir al Carrito
                const btnAgregarCarrito = document.getElementById('btnAgregarCarritoDetalle');
                if (btnAgregarCarrito) {
                    btnAgregarCarrito.addEventListener('click', function() {
                        console.log('Bot√≥n click:', productoEncontrado);
                        agregarProductoAlCarrito(
                            productoEncontrado.id,
                            productoEncontrado.name,
                            productoEncontrado.price,
                            productoEncontrado.image
                        );
                    });
                }

            } else {

                detalleContainer.style.display = 'none';
                errorContainer.style.display = 'block';
            }
            
            // Asegurar que el carrito est√© inicializado
            console.log('‚úÖ Detalle Producto - DOM Content Loaded');
            if (typeof initializeCart === 'function') {
                initializeCart();
                console.log('‚úÖ Detalle Producto - initializeCart ejecutado');
            }
        });
        
        // Agregar listener directo al bot√≥n para debugging
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                const btnCart = document.getElementById('btnOpenCart');
                if (btnCart) {
                    console.log('‚úÖ Bot√≥n del carrito encontrado en Detalle Producto');
                    btnCart.addEventListener('click', function(e) {
                        console.log('üñ±Ô∏è Click en bot√≥n del carrito detectado en Detalle');
                    });
                } else {
                    console.error('‚ùå Bot√≥n del carrito NO encontrado en Detalle Producto');
                }
            }, 500);
        });
    </script>
</body>

</html>